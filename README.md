# Simulator for AMT

## Scott Baker, github.com/scottmbaker/

This is a simulator for Active Management Technology (AMT). It has the following limitations:

* Works only in CIRA mode.

* Works only in CCM mode.

* Reponds to power status and power control messages and not much else (no KVM, no SOL, ...)

* The messages it handles will have no physical effect. i.e. setting the power state to "off" will not turn off the machine.

This simulator was developed using AI Tools, in particular Google Antigravity. Much of the
code was autogenerated.

## Run and activate

First, start a persistent amtsim process:

```
./amtsim -listen :16992 -mps <mps-host-name>:<mps-port> --uuid 1d8aa800-918d-11e4-b33f-123400000000 --debug
```

In my DMT deployed using docker-compose, mps-port is 4433.

Second, use rpcsim to simulate rpc-go to activate amt:

```
./rpcsim activate -u wss://<rps-host-name>:<rps-port>/activate -n --profile scottccm
```

You will be asked for a password. You will have to use the same password if/when you deactivate.

In my DMT deployed using docker-compose, rps-port is 443.

## Get status

You may use the following to get amt information:

```
./rpcsim amtinfo
```

Some of this is sample
data and may not accurately reflect the state of the simulated amt.

## Deactivate

Deactivate local only:

```
./rpcsim deactivate --local
```

Deactivate local and remote:

```
./rpcsim deactivate --url wss://<rps-host-name>:<rps-port>/activate
```

## Sample output

See [SUCCESSFUL-RPCSIM.md](SUCCESSFUL-RPCSIM.md) for sample output.

See [SUCCESSFUL-AMTSIM.md](UNSUCCESSFUL-AMTSIM.md) for sample output.
